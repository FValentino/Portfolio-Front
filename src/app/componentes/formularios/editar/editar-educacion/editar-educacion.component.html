<app-header></app-header>

<section class="bg-formularios">
    <div class="container">
        <div class="section-title">
            <h1> EDITAR EDUCACION </h1>
        </div>
        <form [formGroup]="form" (ngSubmit)="actualizarRegistro($event)">
            <div class="mb-3">
                <label class="form-label">Nombre: </label>
                <input type="text" formControlName="nombre" maxlength="50" 
                [value]="educacion.nombre" (blur)="activarBoton()"
                [ngClass]="{'is-invalid':Nombre?.errors && Nombre?.touched, 
                    'is-valid':!Nombre?.errors && Nombre?.touched}"
                class="form-control">
                <div *ngIf="Nombre?.errors && Nombre?.touched">
                    <p *ngIf="Nombre?.hasError('required')" class="text-danger">
                      Nombre requerido
                    </p>
                </div>
            </div>
            <div class="mb-3">
                <label class="form-label">Carrera: </label>
                <input type="text" formControlName="carrera" maxlength="50"
                [ngClass]="{'is-invalid':Carrera?.errors && Carrera?.touched, 
                    'is-valid':!Carrera?.errors && Carrera?.touched}"
                class="form-control" [value]="educacion.carrera" (blur)="activarBoton()">
                <div *ngIf="Carrera?.errors && Carrera?.touched">
                    <p *ngIf="Carrera?.hasError('required')" class="text-danger">
                        Carrera requerida
                    </p>
                </div>
            </div>
            <div class="mb-3">
                <label class="form-label">Titulo: </label>
                <input type="text" formControlName="titulo" maxlength="50" class="form-control" 
                [value]="educacion.titulo" (blur)="activarBoton()">
            </div>
            <div class="mb-3">
                <label class="form-label">Fecha de inicio: </label>
                <input type="month" formControlName="fechaInicio" maxlength="50"
                [ngClass]="{'is-invalid':FechaInicio?.errors && FechaInicio?.touched, 
                    'is-valid':!FechaInicio?.errors && FechaInicio?.touched}"
                class="ms-3" [value]="educacion.fechaInicio" (blur)="establecerFecha()">
                <div *ngIf="FechaInicio?.errors && FechaInicio?.touched">
                    <p *ngIf="FechaInicio?.hasError('required')" class="text-danger">
                        Fecha de inicio requerida
                    </p>
                </div>
            </div>
            <div class="mb-3" *ngIf="mostrarFecha">
                <label class="form-label">Fecha de Fin: </label>
                <input type="month" formControlName="fechaFin" class="ms-3" (blur)="activarBoton()"
                [value]="fechaFin" [min]="FechaInicio?.value" [max]="fechaFinal">
            </div>
            <div class="mb-1">
                <label class="form-label">Imagen: </label> 
                <input type="file" accept=".jpg, .jpeg, .png" (blur)="activarBoton()"
                class="form-control col" (change)="cargarImagen($event)">
            </div>
            <div class="text-center mt-2">
                <div>
                    <img [src]="previsualizacionUrl"
                    class="img img-fluid rounded border border-dark" id="imagen" alt="">
                </div>
            </div>
            <div class="mt-3 d-flex justify-content-center" *ngIf="usuarioActivo">
                <div class="text-center me-3">
                    <button type="submit" class="btn btn-primary" [disabled]="botonActivo">
                        Guardar
                    </button>
                </div>
                <div class="text-center ms-3">
                    <button class="btn btn-secondary" (click)="cancelar()">
                        Cancelar
                    </button>
                </div>
            </div>
        </form>
    </div>
</section>
