<app-header></app-header>

<section class="bg-formularios">
    <div class="container">
        <div class="section-title">
            <h1> AGREGAR PROYECTO </h1>
        </div>
        <div class="container">
            <form [formGroup]="form" (ngSubmit)="onEnviar($event)">
                <div class="mb-3">
                    <label class="form-label">Nombre</label>
                    <input type="text" formControlName="nombre" maxlength="50"
                    [ngClass]="{'is-invalid':Nombre?.errors && Nombre?.touched, 
                        'is-valid':!Nombre?.errors && Nombre?.touched}"
                    class="form-control" (blur)="activarBoton()">
                    <div *ngIf="Nombre?.errors && Nombre?.touched">
                        <p *ngIf="Nombre?.hasError('required')" class="text-danger">
                            Nombre requerido
                        </p>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Descripcion</label>
                    <input type="text" formControlName="descripcion" 
                    [ngClass]="{'is-invalid':Descripcion?.errors && Descripcion?.touched, 
                        'is-valid':!Descripcion?.errors && Descripcion?.touched}"
                    class="form-control" (blur)="activarBoton()">
                    <div *ngIf="Descripcion?.errors && Descripcion?.touched">
                        <p *ngIf="Descripcion?.hasError('required')" class="text-danger">
                            Descripcion requerido
                        </p>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Repositorio</label>
                    <input type="text" formControlName="urlProyecto"
                    [ngClass]="{'is-invalid':UrlProyecto?.errors && UrlProyecto?.touched, 
                        'is-valid':!UrlProyecto?.errors && UrlProyecto?.touched}"
                    class="form-control" (blur)="activarBoton()">
                    <div *ngIf="UrlProyecto?.errors && UrlProyecto?.touched">
                        <p *ngIf="UrlProyecto?.hasError('required')" class="text-danger">
                            UrlProyecto requerido
                        </p>
                    </div>
                </div>
                
                <div class="mb-1">
                    <label class="form-label">Imagen</label>
                    <input type="file" accept=".jpg, .jpeg, .png" 
                    class="form-control col" (change)="cargarImagen($event)">
                </div>

                <div class="text-center mt-2" [style.visibility]="previsualizacionVis ? 'visible' : 'hidden'">
                    <div>
                        <img [src]="previsualizacionUrl"
                        class="img img-fluid rounded border border-dark" id="imagen" alt="">
                    </div>
                </div>
                <div class="mt-3 d-flex justify-content-center">
                    <div class="text-center me-3">
                        <button type="submit" class="btn btn-primary" [disabled]="botonActivo">
                            Guardar
                        </button>
                    </div>
                    <div class="text-center ms-3">
                        <button class="btn btn-secondary" (click)="cancelar()">
                            Cancelar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>



